# üîß –ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Å–±–æ—Ä–∫–µ DeftHack ImGui

## ‚úÖ –ß—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ

1. ‚úÖ **kiero.h –æ–±–Ω–æ–≤–ª–µ–Ω**
   - `KIERO_INCLUDE_D3D11 = 1`
   - `KIERO_USE_MINHOOK = 1`

2. ‚úÖ **MinHook —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω**
   - –í—Å–µ –∏—Å—Ö–æ–¥–Ω–∏–∫–∏ –≤ `kiero-1.2.12/minhook/src/`
   - –í–∫–ª—é—á–∞—è HDE64 –¥–ª—è x64

3. ‚úÖ **CMakeLists.txt –Ω–∞—Å—Ç—Ä–æ–µ–Ω**
   - –í–∫–ª—é—á–∞–µ—Ç kiero.cpp
   - –í–∫–ª—é—á–∞–µ—Ç –≤—Å–µ —Ñ–∞–π–ª—ã MinHook
   - –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—É—Ç–∏ –∫ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º

4. ‚úÖ **main.cpp –æ–±–Ω–æ–≤–ª–µ–Ω**
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Kiero –¥–ª—è —Ö—É–∫–∞
   - –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å DeftHackGUI

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
DeftHack_ImGui/
‚îú‚îÄ‚îÄ main.cpp                          # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ —Å Kiero
‚îú‚îÄ‚îÄ deffhack_gui.hpp                  # ImGui –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îú‚îÄ‚îÄ CMakeLists.txt                    # ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω
‚îú‚îÄ‚îÄ COMPILE_WITH_KIERO.bat            # ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω
‚îÇ
‚îú‚îÄ‚îÄ imgui/                            # ImGui –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ imgui.cpp
‚îÇ   ‚îú‚îÄ‚îÄ imgui_draw.cpp
‚îÇ   ‚îú‚îÄ‚îÄ imgui_tables.cpp
‚îÇ   ‚îú‚îÄ‚îÄ imgui_widgets.cpp
‚îÇ   ‚îî‚îÄ‚îÄ backends/
‚îÇ       ‚îú‚îÄ‚îÄ imgui_impl_dx11.cpp
‚îÇ       ‚îî‚îÄ‚îÄ imgui_impl_win32.cpp
‚îÇ
‚îî‚îÄ‚îÄ kiero-1.2.12/                     # Kiero + MinHook
    ‚îú‚îÄ‚îÄ kiero.h                       # ‚úÖ D3D11=1, MinHook=1
    ‚îú‚îÄ‚îÄ kiero.cpp                     # ‚úÖ –í–∫–ª—é—á–µ–Ω –≤ —Å–±–æ—Ä–∫—É
    ‚îî‚îÄ‚îÄ minhook/                      # ‚úÖ –ü–æ–ª–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞
        ‚îú‚îÄ‚îÄ include/
        ‚îÇ   ‚îî‚îÄ‚îÄ MinHook.h
        ‚îî‚îÄ‚îÄ src/
            ‚îú‚îÄ‚îÄ buffer.c              # ‚úÖ
            ‚îú‚îÄ‚îÄ hook.c                # ‚úÖ
            ‚îú‚îÄ‚îÄ trampoline.c          # ‚úÖ
            ‚îî‚îÄ‚îÄ hde/
                ‚îî‚îÄ‚îÄ hde64.c           # ‚úÖ –î–ª—è x64
```

## üöÄ –ö–æ–º–ø–∏–ª—è—Ü–∏—è

### –°–ø–æ—Å–æ–± 1: –ë—ã—Å—Ç—Ä–∞—è –∫–æ–º–ø–∏–ª—è—Ü–∏—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```batch
cd DeftHack_ImGui
COMPILE_WITH_KIERO.bat
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç:
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ Visual Studio
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ MinHook
- –ö–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç –≤—Å–µ —Ñ–∞–π–ª—ã (ImGui + Kiero + MinHook + HDE64)
- –°–æ–∑–¥–∞–µ—Ç `version.dll`

### –°–ø–æ—Å–æ–± 2: CMake

```batch
cd DeftHack_ImGui
cmake -S . -B build -G "Visual Studio 17 2022" -A x64
cmake --build build --config Release
```

–†–µ–∑—É–ª—å—Ç–∞—Ç: `build/Release/version.dll`

### –°–ø–æ—Å–æ–± 3: –í—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ cl.exe

```batch
cd DeftHack_ImGui\build

REM –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞
call "C:\Program Files\Microsoft Visual Studio\2022\Community\VC\Auxiliary\Build\vcvars64.bat"

REM –ö–æ–º–ø–∏–ª—è—Ü–∏—è
cl /LD /O2 /EHsc /std:c++17 ^
   /I".." ^
   /I"..\imgui" /I"..\imgui\backends" ^
   /I"..\kiero-1.2.12" ^
   /I"..\kiero-1.2.12\minhook\include" ^
   /I"..\kiero-1.2.12\minhook\src" ^
   /D"WIN32" /D"_WINDOWS" /D"WIN64" ^
   "..\main.cpp" ^
   "..\imgui\imgui.cpp" ^
   "..\imgui\imgui_draw.cpp" ^
   "..\imgui\imgui_tables.cpp" ^
   "..\imgui\imgui_widgets.cpp" ^
   "..\imgui\backends\imgui_impl_dx11.cpp" ^
   "..\imgui\backends\imgui_impl_win32.cpp" ^
   "..\kiero-1.2.12\kiero.cpp" ^
   "..\kiero-1.2.12\minhook\src\buffer.c" ^
   "..\kiero-1.2.12\minhook\src\hook.c" ^
   "..\kiero-1.2.12\minhook\src\trampoline.c" ^
   "..\kiero-1.2.12\minhook\src\hde\hde64.c" ^
   /link /OUT:"version.dll" ^
   d3d11.lib dxgi.lib user32.lib gdi32.lib ^
   /SUBSYSTEM:WINDOWS /MACHINE:X64
```

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–±–æ—Ä–∫–∏

–ü–æ—Å–ª–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –¥–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è —Ñ–∞–π–ª:
- `DeftHack_ImGui/build/version.dll` (CMake)
- `DeftHack_ImGui/version.dll` (—Å–∫—Ä–∏–ø—Ç)

–†–∞–∑–º–µ—Ä: –ø—Ä–∏–º–µ—Ä–Ω–æ 800 KB - 1.5 MB

## üéÆ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ Unturned**
2. **–ò–Ω–∂–µ–∫—Ç–∏—Ä—É–π—Ç–µ version.dll** —á–µ—Ä–µ–∑ GH Injector
3. **–ù–∞–∂–º–∏—Ç–µ INSERT** –≤ –∏–≥—Ä–µ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –º–µ–Ω—é

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞: kiero.h not found

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—É—Ç–∏ –≤ CMakeLists.txt

**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤ CMakeLists.txt –µ—Å—Ç—å:
```cmake
target_include_directories(DeftHack_ImGui PRIVATE
    ${CMAKE_CURRENT_SOURCE_DIR}/kiero-1.2.12
)
```

### –û—à–∏–±–∫–∞: MinHook.h not found

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å –∫ MinHook

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤—å—Ç–µ –≤ CMakeLists.txt:
```cmake
target_include_directories(DeftHack_ImGui PRIVATE
    ${CMAKE_CURRENT_SOURCE_DIR}/kiero-1.2.12/minhook/include
    ${CMAKE_CURRENT_SOURCE_DIR}/kiero-1.2.12/minhook/src
)
```

### –û—à–∏–±–∫–∞: unresolved external symbol MH_Initialize

**–ü—Ä–∏—á–∏–Ω–∞:** MinHook –∏—Å—Ö–æ–¥–Ω–∏–∫–∏ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ —Å–±–æ—Ä–∫—É

**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤ CMakeLists.txt –µ—Å—Ç—å:
```cmake
add_library(DeftHack_ImGui SHARED
    kiero-1.2.12/minhook/src/buffer.c
    kiero-1.2.12/minhook/src/hook.c
    kiero-1.2.12/minhook/src/trampoline.c
    kiero-1.2.12/minhook/src/hde/hde64.c
)
```

### –û—à–∏–±–∫–∞: unresolved external symbol _hde64_disasm

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ –¥–æ–±–∞–≤–ª–µ–Ω hde64.c

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤—å—Ç–µ –≤ —Å–±–æ—Ä–∫—É:
```cmake
kiero-1.2.12/minhook/src/hde/hde64.c
```

### –ú–µ–Ω—é –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –∏–≥—Ä–µ

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
1. –ò–≥—Ä–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç DX12 –≤–º–µ—Å—Ç–æ DX11
2. –ê–Ω—Ç–∏—á–∏—Ç –±–ª–æ–∫–∏—Ä—É–µ—Ç —Ö—É–∫
3. DLL –Ω–µ –∏–Ω–∂–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ

**–†–µ—à–µ–Ω–∏–µ:**
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∏–≥—Ä—É –≤ –æ–∫–æ–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ
2. –û—Ç–∫–ª—é—á–∏—Ç–µ Steam Overlay
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Manual Map –∏–Ω–∂–µ–∫—Ü–∏—é
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ `KIERO_INCLUDE_D3D11 = 1` –≤ kiero.h

### –ö—Ä–∞—à –ø—Ä–∏ –∏–Ω–∂–µ–∫—Ü–∏–∏

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–∞–∑—Ä—è–¥–Ω–æ—Å—Ç—å –∏–ª–∏ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω–∞—è DLL

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ DLL x64 (–Ω–µ x86)
2. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –≤ Release —Ä–µ–∂–∏–º–µ
3. –û—Ç–∫–ª—é—á–∏—Ç–µ –∞–Ω—Ç–∏–≤–∏—Ä—É—Å

## üìä –ß—Ç–æ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –§–∞–π–ª–æ–≤ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-----------|--------|------------|
| ImGui | 6 | GUI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å |
| Kiero | 1 | DX11 —Ö—É–∫ —Å–∏—Å—Ç–µ–º–∞ |
| MinHook | 4 | –•—É–∫ —Ñ—É–Ω–∫—Ü–∏–π |
| Main | 1 | –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ |
| **–í—Å–µ–≥–æ** | **12** | **–ü–æ–ª–Ω–∞—è DLL** |

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫

### kiero.h –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å:
```cpp
#define KIERO_INCLUDE_D3D11  1  // ‚úÖ
#define KIERO_USE_MINHOOK    1  // ‚úÖ
```

### CMakeLists.txt –¥–æ–ª–∂–µ–Ω –≤–∫–ª—é—á–∞—Ç—å:
```cmake
# Kiero
kiero-1.2.12/kiero.cpp

# MinHook
kiero-1.2.12/minhook/src/buffer.c
kiero-1.2.12/minhook/src/hook.c
kiero-1.2.12/minhook/src/trampoline.c
kiero-1.2.12/minhook/src/hde/hde64.c

# –ü—É—Ç–∏
${CMAKE_CURRENT_SOURCE_DIR}/kiero-1.2.12
${CMAKE_CURRENT_SOURCE_DIR}/kiero-1.2.12/minhook/include
${CMAKE_CURRENT_SOURCE_DIR}/kiero-1.2.12/minhook/src
```

## ‚úÖ –ò—Ç–æ–≥–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

–ü–µ—Ä–µ–¥ –∫–æ–º–ø–∏–ª—è—Ü–∏–µ–π —É–±–µ–¥–∏—Ç–µ—Å—å:
- ‚úÖ kiero.h: D3D11=1, MinHook=1
- ‚úÖ MinHook –∏—Å—Ö–æ–¥–Ω–∏–∫–∏ –Ω–∞ –º–µ—Å—Ç–µ
- ‚úÖ CMakeLists.txt –≤–∫–ª—é—á–∞–µ—Ç –≤—Å–µ —Ñ–∞–π–ª—ã
- ‚úÖ Visual Studio 2022 —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- ‚úÖ Windows SDK 10.0+ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

---

**–ì–æ—Ç–æ–≤–æ! –ü—Ä–æ–µ–∫—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏ –≥–æ—Ç–æ–≤ –∫ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏! üéâ**
